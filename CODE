// Problem 3
gen eligible = 0
replace eligible = 1 if birthyr == 1958 & draftnumber >= 175
replace eligible = 1 if birthyr == 1959 & draftnumber >= 320
replace eligible = 1 if birthyr == 1960 & draftnumber >= 341
replace eligible = 1 if birthyr == 1961 & draftnumber >= 350
replace eligible = 1 if birthyr == 1962 & draftnumber >= 320

/*
4. Estimate the “first stage” effect of eligibility on conscription.  Think carefully about the regression specification.  Do you need to control for birth year indicators?  Do you need to control for ethnic composition?
*/

reg conscripted eligible, r

/*
5. Estimate the “reduced form” effect of eligibility on crimerate. Does this result reflect the causal effect of conscription?
*/

reg crimerate eligible, r

/*
6. Based on your results for questions (4) and (5), calculate the instrumental variables estimate of the effect of conscription on crimerate. You need only calculate a point estimate, not standard errors.
*/

di(0.0016751/0.6564878)

/*
7. Confirm your calculations by running a two-stage least squares regression. Are there differences between the 2SLS (question 7) and OLS (question 2) results? Why or why not?
*/

ivregress 2sls crimerate (conscripted = eligible) murder drug threat arms whitecollar property sexual, r

/*
10.
*/

*(a)




*(b)
gen distance = 0
replace distance = draftnumber - 175 if birthyr == 1958
replace distance = draftnumber - 320 if birthyr == 1959
replace distance = draftnumber - 341 if birthyr == 1960
replace distance = draftnumber - 350 if birthyr == 1961
replace distance = draftnumber - 320 if birthyr == 1962

drop if (abs(distance) > 100)

*(c) Draw a scatter plot of the conscripted against distance. Do your results suggest that crossing the cutoff raises conscription?

scatter conscripted distance

*(d) Draw a scatter plot of the crimerate against distance. Do your results suggest that crossing the cutoff raises conscription?

scatter crimerate distance

*(e) Now run a two-stage least squares regression to estimate the effect of conscripted on crimerate in a regression discontinuity design. Use local linear regression with a bandwidth of 100. To allow the slopes to be different above and below the cutoff, first generate the interaction of distance with eligible: gen distanceXelig = distance*eligible. Then estimate: ivregress 2sls crimerate (conscripted=eligible) distance distanceXelig,r first. Explain the command, and interpret both the first- and second-stage results. Do the results confirm your interpretation of the scatter plots in parts (c) and (d) of the question?

gen distanceXelig = distance*eligible
ivregress 2sls crimerate (conscripted=eligible) distance distanceXelig,r

*(f) Why do you think the regression discontinuity results are different from the results earlier in the problem set?




translate pset4_log_file.smcl pset4_log_file.pdf, replace // turn logfile into a pdf to submit on Gradescope 
